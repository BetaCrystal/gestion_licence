{% extends 'base.html.twig' %}
{% block head %}
	{% block javascripts %}
		{{ encore_entry_script_tags('app') }}
	{% endblock %}
	{% block stylesheets %}
		<link rel="stylesheet" href="{{ asset('styles/app.css') }}">
	{% endblock %}
	<script src="https://cdn.tailwindcss.com"></script>
	<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.20/index.global.min.js'></script>
	<script>

		document.addEventListener('DOMContentLoaded', function () {
var calendarEl = document.getElementById('calendar');
var calendar = new FullCalendar.Calendar(calendarEl, {
timeZone: 'UTC+1',
initialView: 'timeGridWeek',
slotMinTime: "08:00:00",
slotMaxTime: "19:00:00",
height: 'auto',
locale: 'fr',
firstDay: 1,
dateClick: function (info) {
window.location.href = '{{ path("app_add_course") }}?date=' + info.dateStr;
},
headerToolbar: {
left: 'prev,next',
center: 'title',
right: 'dayGridMonth,timeGridWeek,timeGridDay'
},
events: '{{ path("app_calendar_events") }}',
eventContent: function (info) {
return {
html: `
                <div>
                    <strong>${
info.event.extendedProps.module
}</strong><br>
                    <small>${
info.event.extendedProps.instructor
}</small><br>
<small>${
info.event.id
}</small><br>
<small>${
info.event.start
}</small><br>
<small>${
info.event.end
}</small><br>
                    <small>${
info.event.title
}</small>
                </div>
            `
};
}


});

calendar.render();

});
	</script>
{% endblock %}
{% block title %}Calendar
{% endblock %}

{% block body %}
	<div>
		{% include "Components/sidebar.html.twig" %}
		{% for message in app.flashes('error') %}
			<div class="alert alert-danger">{{ message }}</div>
		{% endfor %}
		<h1 class="text-blue-950 text-2xl">Calendrier</h1>
		<a href="{{ path('app_add_course') }}" class="text-white bg-blue-950">Ajouter une intervention</a>

		<div id="calendar"></div>
		<a>Exporter le calendrier de l'ann√©e (.xls)</a>
		<a href="{{ path('app_calendar_week_convert', {'weekid': 1}) }}">Exporter le planning de la semaine (fichier .xls)</a>
	</div>
{% endblock %}
